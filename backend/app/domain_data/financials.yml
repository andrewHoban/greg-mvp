domain: "financials"
description: "Financial metrics and revenue data"
tables:
  transactions:
    description: "Individual transaction records"
    fields:
      - name: "transaction_id"
        type: "STRING"
        description: "Unique transaction identifier"
        semantic_role: "dimension"
      - name: "user_id"
        type: "INTEGER"
        description: "User who made the transaction"
        semantic_role: "dimension"
      - name: "amount"
        type: "DECIMAL"
        description: "Transaction amount in USD"
        semantic_role: "metric"
      - name: "currency"
        type: "STRING"
        description: "Transaction currency code"
        semantic_role: "dimension"
      - name: "transaction_type"
        type: "STRING"
        description: "Type of transaction (purchase, refund, subscription)"
        semantic_role: "dimension"
      - name: "transaction_date"
        type: "TIMESTAMP"
        description: "When transaction occurred"
        semantic_role: "dimension"
      - name: "status"
        type: "STRING"
        description: "Transaction status (completed, pending, failed)"
        semantic_role: "dimension"
  subscriptions:
    description: "User subscription information"
    fields:
      - name: "subscription_id"
        type: "STRING"
        description: "Unique subscription identifier"
        semantic_role: "dimension"
      - name: "user_id"
        type: "INTEGER"
        description: "Subscriber user ID"
        semantic_role: "dimension"
      - name: "plan_name"
        type: "STRING"
        description: "Subscription plan name"
        semantic_role: "dimension"
      - name: "monthly_amount"
        type: "DECIMAL"
        description: "Monthly subscription amount"
        semantic_role: "metric"
      - name: "start_date"
        type: "TIMESTAMP"
        description: "Subscription start date"
        semantic_role: "dimension"
      - name: "end_date"
        type: "TIMESTAMP"
        description: "Subscription end date (null if active)"
        semantic_role: "dimension"

joins:
  - left_table: "transactions"
    right_table: "subscriptions"
    join_condition: "transactions.user_id = subscriptions.user_id"
    join_type: "LEFT"

business_rules:
  - "All amounts are stored in USD regardless of original currency"
  - "Refund transactions have negative amounts"
  - "Failed transactions are excluded from revenue calculations"
  - "Subscription renewals create new transaction records"

sample_questions:
  - "What is the total revenue by month?"
  - "Show subscription churn rate over time"
  - "Which subscription plans generate the most revenue?"
  - "What's the average transaction amount by user segment?"